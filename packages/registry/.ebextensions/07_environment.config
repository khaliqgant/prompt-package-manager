# Environment-specific configuration
# These can be overridden via EB CLI or console

option_settings:
  # Deployment settings
  aws:elasticbeanstalk:command:
    DeploymentPolicy: RollingWithAdditionalBatch
    BatchSizeType: Percentage
    BatchSize: 50
    Timeout: 600

  # Managed updates - combines both namespaces properly
  aws:elasticbeanstalk:managedactions:
    ManagedActionsEnabled: true
    PreferredStartTime: "Sun:03:00"  # Sunday 3am UTC

  aws:elasticbeanstalk:managedactions:platformupdate:
    UpdateLevel: minor  # Required when ManagedActionsEnabled is true
    InstanceRefreshEnabled: true

  # Health monitoring
  aws:elasticbeanstalk:healthreporting:system:
    SystemType: enhanced
    EnhancedHealthAuthEnabled: true

  # Application health check
  aws:elasticbeanstalk:application:
    Application Healthcheck URL: /health

  # Load Balancer (if using LoadBalanced environment)
  aws:elbv2:listener:default:
    ListenerEnabled: true

  # Notifications (optional - add SNS topic ARN)
  # aws:elasticbeanstalk:sns:topics:
  #   Notification Endpoint: your-email@example.com
  #   Notification Protocol: email
